<div class="grid-x">
  <div class="cell large-offset-1">
    <h3>hello<%=" #{current_autor.name}"%></h3>
</div>
</div>
<div class="grid-x grid-margin-x">
  <div class="medium-6 large-offset-1 cell">
<table style="width:1600px;">
  <tr>
    <th >Title</th>
    <th>status</th>
    <th>published_at</th>
    <th>comments</th>
  </tr>

<% @articles.each do |article| %>
  <tr>
    <td><%= link_to(article.title, edit_article_path(article)) %></td>
    <td><%= article.published %></td>
    <td><%= article.published_at %></td>
    <td><%= article.comments.map{|comment| comment.body}.join("\n")%></td>
    </tr>
<% end %>
</table>
</div>
</div>
<br>

<div class="grid-x grid-margin-x">
  <div class="medium-6 large-offset-1 cell">
      <button class="button" type="button" data-toggle="example-dropdown-top-center">count of autors</button>
      <div class="dropdown-pane" data-position="top" data-alignment="center" id="example-dropdown-top-center" data-dropdown data-auto-focus="true">
      <%= pie_chart Autor.group(:name).count,width: "250px", height: "350px", colors: ["#b00", "#666", "b007", "#670"]  %>
    </div>
      <button class="button" type="button" data-toggle="example-dropdown2">count of articles</button>
      <div class="dropdown-pane top" id="example-dropdown2" data-dropdown>
        <%= line_chart Article.group(:created_at).count, width: "300px", height: "200px", colors: ["#b00", "#666", "b007", "#670"] %>
        </div>
  <button class="button" type="button" data-toggle="example-dropdown-bottom-left">active date for comments</button>
  <div class="dropdown-pane" data-position="bottom" data-alignment="left" id="example-dropdown-bottom-left" data-dropdown data-auto-focus="true">
    <%= bar_chart @autor.articles.map{|art| {name: art.title.to_s.byteslice(0..9), data: art.comments.group(:created_at).count}}, width: "292px", height: "350px", colors: ["#b00", "#666", "b007", "#670"]%>
    </div>
    <button class="button" type="button" data-toggle="example-dropdown-top-right">salary</button>
    <div class="dropdown-pane" data-position="top" data-alignment="right" id="example-dropdown-top-right" data-dropdown data-auto-focus="true">
      <%= pie_chart Autor.group(:name).sum(:salary), width: "250px", height: "350px", colors: ["#b00", "#666", "b007", "#670"] %>
  </div>
  <button class="button" type="button" data-toggle="example-dropdown-bottom-right">Look all charts</button>
  <div class="dropdown-pane" data-position="bottom" data-alignment="right" id="example-dropdown-bottom-right" data-dropdown data-auto-focus="true">
    <%=link_to 'charts', autors_charts_url%>
    </div>
  </div>
</div>
  <div class="grid-x grid-margin-x">
    <div class="medium-6 large-offset-1 cell">
  <table style="width:700px;">
    <tr>
      <th>articles count</th>
      <th>comments count</th>
      <th>category of articles</th>
      <th>salary</th>
    </tr>
      <tr>
        <td><%= @autor.articles.count%></td>
        <td><%= @autor.articles.map {|article| article.comments.count}.join(', ')%></td>
        <td><%= @autor.articles.map {|article| article.category.name}.join(', ')%></td>
        <td><%= ((@autor.articles.map{|art| art.comments.count}).sum*0.8)+((@autor.articles.count)*10)+10 %></td>
  </table>
  </div>
  </div>
  <div class="grid-x">
    <div class="cell large-offset-1">
    <%= link_to 'Back', articles_path %>
  </div>
</div>
<div class="grid-x">
  <div class="medium-6 large-offset-1 cell">
    <label>Select color
            <select id="color">
              <option value="#666">1</option>
              <option value="#674">2</option>
              <option value="#655">3</option>
              <option value="#642">4</option>
            </select>
</label>
</div>
<div class="medium-6 large-offset-1 cell">
  <button class="button" type="button" onclick="changeColor()">Change colors</button>
</div>
  </div>
  <script>

  function changeColor(){
    var x = document.getElementsByTagName("TH");
    var i;
    for (i = 0; i < x.length; i++) {
        x[i].style.backgroundColor = document.getElementById("color").value;

    }

  };

  </script>
